<ROSETTASCRIPTS>
	<SCOREFXNS>
              	<ScoreFunction name="sfxn" weights="ref2015.wts" />
	</SCOREFXNS>
	<RESIDUE_SELECTORS>
    		<Chain name="target" chains="X"/>

    		<Index name="surface_interface" resnums="223X,224X,226X-231X,239X,240X,241X,245X,246X,247X,249X,251X,225X,242X,243X,244X,248X,250X"/>
                <Index name="target_interface" resnums="223X,224X,226X-231X,239X,240X,241X,245X,246X,247X,249X,251X"/>
                <Not name="!interface" selector="target_interface"/>



        </RESIDUE_SELECTORS>
        <MOVE_MAP_FACTORIES>
        </MOVE_MAP_FACTORIES>
        <SIMPLE_METRICS>
                <SequenceRecoveryMetric name="seq_recovery" use_native="true" residue_selector="target_interface" />
                <SequenceSimilarityMetric name="seq_similarity" residue_selector="target_interface" apply_selector_to_native="true" normalize="true"/>
                <SequenceMetric name="seq" />
                <TotalEnergyMetric name="target_energy" scoretype="total_score" residue_selector="target" scorefxn="sfxn" />
                <SelectedResiduesPyMOLMetric name="interface_residues" residue_selector="target_interface" />
        </SIMPLE_METRICS>
<TASKOPERATIONS>
                <OperateOnResidueSubset name="prevent_not_interface" selector="!interface">
                        <PreventRepackingRLT/>
                </OperateOnResidueSubset>

                <OperateOnResidueSubset name="ala" selector="target_interface">
                        <RestrictAbsentCanonicalAASRLT aas="A"/>
                </OperateOnResidueSubset>

                <OperateOnResidueSubset name="no_cys" selector="target_interface">
                        <RestrictAbsentCanonicalAASRLT aas="ADEFGHIKLMNPQRSTVWY"/>
                </OperateOnResidueSubset>

                <ExtraRotamersGeneric name="ex1ex2" ex1="1" ex2="1" />
                 <InitializeFromCommandline name="init" />

        </TASKOPERATIONS>
        <FILTERS>
                <ShapeIdentity name="shape" min_sc="0.99" residue_selector1="surface_interface" residue_selector2="surface_interface" confidence="1"/>
                <ShapeIdentity name="si" min_sc="0.5" residue_selector1="surface_interface" residue_selector2="surface_interface" confidence="0" />
                <ElectrostaticSimilarity name="es" residue_selector1="surface_interface" residue_selector2="surface_interface" use_native="1" partially_solvated="0" confidence="1" min_sc="-0.99"/>
                <ElectrostaticSimilarity name="elec" residue_selector1="surface_interface" residue_selector2="surface_interface" use_native="1" partially_solvated="0" confidence="0" min_sc="-0.99"/>
                <CalculatorFilter confidence="1" equation="(1 - (1 / (1 + EXP(-(-13.79986756 + (-13.78594078 * ES) + (14.64347448 * SS))))))" name="comb_filters" threshold="0.0001">
                        <Var filter_name="shape" name="SS"/>
                        <Var filter_name="es" name="ES"/>
                </CalculatorFilter>
        </FILTERS>
        <MOVERS>
                <RunSimpleMetrics name="run_metrics" metrics="seq_recovery,seq_similarity,seq,target_energy,interface_residues" />

                <PackRotamersMover name="alapose" task_operations="ala,prevent_not_interface" scorefxn="sfxn"/>
                <PackRotamersMover name="fixbb1" scorefxn="sfxn" task_operations="ex1ex2,prevent_not_interface,init,no_cys" />
                <RandomMutation name="fixbb2" task_operations="ex1ex2,prevent_not_interface,init,no_cys" scorefxn="sfxn"/>
        </MOVERS>
        <APPLY_TO_POSE>
        </APPLY_TO_POSE>
        <PROTOCOLS>
                <Add mover_name="alapose" />
                <Add mover_name="fixbb1" />
                <Add mover_name="run_metrics" />
                <Add filter_name="si" />
                <Add filter_name="elec" />
        </PROTOCOLS>
        <OUTPUT />
</ROSETTASCRIPTS>
