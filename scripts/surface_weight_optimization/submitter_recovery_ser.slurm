#!/bin/bash
#SBATCH --nodes 1
#SBATCH --ntasks-per-node 1
#SBATCH --cpus-per-task 1
#SBATCH --mem 8192
#SBATCH --time 48:00:00
#SBATCH --partition serial
#SBATCH --output=./ser.%A_%a.out
#SBATCH --error=./ser.%A_%a.err

pdb_id=("4BFI_A_B" "1P2C_AB_C" "2MWS_A_B" "5W6G_HL_A" "5EB1_A_B" "4PEQ_A_B" "3K2U_HL_A" "3IOL_A_B" "4YPG_BA_C" "6B0A_HL_A" "1A14_HL_N" "4ZGY_A_B" "1BKD_R_S" "4NQW_A_B" "3B9K_HL_B" "4AYE_A_D" "1SBB_A_B" "1ZVH_L_A" "2H7V_A_C" "4U0R_BC_A" "1CGI_E_I" "3KJ4_HL_A" "3GQI_A_B" "3WO3_A_B" "5W6G_HL_A" "5D1L_A_B" "4OQT_HL_A" "2N73_A_B" "4TTD_HL_A" "3BKY_H_L" "2LWW_A_B" "3SJV_D_E" "2A6D_L_H" "4K9E_HL_C" "4REY_A_B" "3SJV_D_E" "2VDB_A_B" "3K1R_A_B" "1ES0_A_B" "3L95_HL_Y" "5XWD_HD_A" "5HI5_CD_A" "4NNP_HL_A" "5UCB_HL_B" "3WLW_HL_B" "1R0R_E_I" "4HEP_A_G" "4HCR_HL_A" "5INB_A_B" "4DID_A_B" "5SY8_HL_O" "1FSK_BC_A" "5ABV_A_B" "3K2U_HL_A" "2Z3R_A_B" "1K74_AB_DE" "2R0K_HL_A" "1JTG_B_A" "1KKL_ABC_H" "4ZXB_CD_E" "2EFD_A_B" "5B3J_EF_C" "3ONW_A_C" "4ZGY_A_B" "3WA0_A_G" "2WO3_A_B" "5XKU_CB_A" "5F96_HL_G" "4K9E_HL_C" "3RPG_B_C" "3VG9_CB_A" "5EU7_EC_A" "5W08_OP_E" "5GGV_HL_Y" "2JIX_HL_E" "1FC2_C_D" "4Y5V_DE_F" "4K81_A_B" "4YPG_BA_C" "5ANM_BA_G" "3KS0_HL_B" "3WA5_A_B" "3QWO_AB_C" "5VEB_AB_X" "4L0P_A_B" "5XXY_HL_A" "3E1Z_A_B" "3FII_A_B" "1ZJD_A_B" "4H03_A_B" "3VLB_A_B" "3F1P_A_B" "6CYF_UT_Q" "1XDT_T_R" "4MJS_A_B" "3LD8_CB_A" "3U9U_AB_F" "5J28_A_C" "5FR1_A_B" "3PNW_TS_U" "3MJ7_A_B" "3K75_D_B" "4W6W_A_B" "4YH7_A_B" "2P46_A_B" "5BW7_A_B" "1KXP_A_D" "6FAX_HL_R" "1XQS_A_C" "5MHR_KJ_C" "3TKL_A_B" "4F2M_CD_F" "3SGQ_E_I" "1Y64_A_B" "2Z3R_A_B" "4GI3_A_C" "4HCR_HL_A" "4KFZ_A_C" "4ETP_A_B" "4LIQ_HL_E" "4XP4_HL_A" "2MEJ_A_B" "4WEU_D_B" "2B2X_HL_A" "2BYK_A_B" "3LAQ_A_U" "6BPA_BC_A" "5GGV_HL_Y" "1VEU_A_B" "4AL8_HL_C" "1P2C_AB_C" "5W0D_BC_A" "4J2Y_A_B" "4AL8_HL_C" "4MI8_A_C" "4ZLT_B_F" "1DPJ_A_B" "4KRL_B_A" "4F15_HI_G" "3G6J_E_F" "1ID5_H_L" "3TGK_E_I" "4Z5R_BA_N" "1HE1_C_A" "3FII_A_B" "1EXB_ABDC_EGFH" "3OUX_A_B" "2HD5_A_B" "3H2U_A_B" "3K8P_C_D" "1ZR0_A_B" "3GRW_HL_A" "2CFH_A_C" "3B9K_HL_B" "5BW7_A_B" "4G6J_HL_A" "1A14_HL_N" "6AYZ_RC_M" "2M04_A_B" "5TLJ_DC_X" "4U32_X_A" "2L29_A_B" "4E42_A_B" "3OKY_A_B" "5CZF_A_D" "1L0Y_A_B" "3WQB_A_B" "1Y64_A_B" "1YNT_DC_G" "3CX8_A_B" "5KW9_HL_A" "3H6G_A_B" "5U8R_HL_A" "3GQI_A_B" "2WWX_A_B" "4DKF_HL_A" "1O9A_A_B" "4G80_EF_T" "4YBQ_FE_A" "4Y5X_JK_L" "4GXU_MN_ABEFCD" "4J6R_HL_G" "5XKU_CB_A" "4K24_A_U" "5BK2_CD_B" "5FB8_BA_C" "3TT3_HL_A" "3H6G_A_B" "4HEP_A_G" "1UUZ_A_D" "2NR6_FE_B" "2OMV_A_B" "3X3F_HL_A" "5FCU_HL_G" "3V3K_A_B" "4M5F_A_B" "4LYL_A_B" "1Y64_A_B" "3UL4_A_B" "5D93_CB_A")
chains1=("B" "A,B" "B" "A" "A" "A" "A" "A" "B,A" "H,L" "H,L" "A" "R" "A" "H,L" "D" "A" "A" "A" "A" "E" "H,L" "A" "B" "H,L" "B" "H,L" "B" "H,L" "L" "A" "D" "H" "H,L" "A" "D" "A" "A" "B" "H,L" "H,D" "C,D" "H,L" "B" "B" "E" "G" "H,L" "B" "B" "O" "B,C" "B" "H,L" "B" "A,B" "H,L" "B" "H" "E" "B" "E,F" "A" "A" "A" "A" "C,B" "G" "H,L" "C" "A" "E,C" "E" "H,L" "H,L" "D" "D,E" "B" "C" "G" "H,L" "B" "C" "A,B" "A" "H,L" "B" "A" "A" "B" "B" "B" "U,T" "R" "A" "C,B" "A,B" "C" "A" "T,S" "A" "B" "B" "B" "A" "A" "D" "H,L" "C" "K,J" "B" "F" "E" "B" "B" "A" "H,L" "C" "B" "H,L" "H,L" "B" "D" "A" "B" "U" "B,C" "Y" "A" "H,L" "A,B" "B,C" "B" "H,L" "C" "F" "A" "A" "G" "E" "H" "E" "B,A" "A" "A" "A,B,D,C" "A" "B" "A" "D" "A" "H,L" "A" "H,L" "A" "H,L" "N" "R,C" "A" "D,C" "A" "A" "B" "B" "D" "A" "A" "B" "D,C" "A" "H,L" "B" "H,L" "A" "A" "H,L" "A" "E,F" "F,E" "L" "A,B,E,F,C,D" "H,L" "C,B" "A" "C,D" "C" "A" "A" "A" "A" "F,E" "A" "H,L" "H,L" "A" "A" "A" "A" "A" "C,B")
chains2=("A" "C" "A" "H,L" "B" "B" "H,L" "B" "C" "A" "N" "B" "S" "B" "B" "A" "B" "L" "C" "B,C" "I" "A" "B" "A" "A" "A" "A" "A" "A" "H" "B" "E" "L" "C" "B" "E" "B" "B" "A" "Y" "A" "A" "A" "H,L" "H,L" "I" "A" "A" "A" "A" "H,L" "A" "A" "A" "A" "D,E" "A" "A" "A,B,C" "C,D" "A" "C" "C" "B" "G" "B" "A" "H,L" "C" "B" "C,B" "A" "O,P" "Y" "E" "C" "F" "A" "B,A" "B,A" "B" "A" "A,B" "X" "B" "A" "A" "B" "B" "A" "A" "A" "Q" "T" "B" "A" "F" "A" "B" "U" "B" "D" "A" "A" "B" "B" "A" "R" "A" "C" "A" "C,D" "I" "A" "A" "C" "A" "A" "A" "E" "A" "A" "B" "H,L" "A" "A" "A" "H,L" "B" "C" "C" "A" "A" "C" "A" "B" "B" "B" "H,I" "F" "L" "I" "N" "C" "B" "E,G,F,H" "B" "A" "B" "C" "B" "A" "C" "B" "B" "A" "H,L" "M" "B" "X" "X" "B" "A" "A" "A" "B" "B" "A" "G" "B" "A" "A" "A" "B" "B" "A" "B" "T" "A" "J,K" "M,N" "G" "A" "U" "B" "B,A" "H,L" "B" "G" "D" "B" "B" "A" "G" "B" "B" "B" "B" "B" "A")
mut_res=("98B" "93A" "6B" "125A" "179A" "32A" "95A" "31A" "52B" "30L" "58H" "118A" "65R" "35A" "98H" "288D" "54A" "30A" "71A" "344A" "217E" "53H" "762A" "302B" "95L" "231B" "92L" "153B" "93L" "173L" "416A" "138D" "188H" "30H" "99A" "46D" "270A" "101A" "118B" "30L" "52D" "53C" "55H" "4B" "111B" "103E" "106G" "55H" "407B" "100B" "78O" "91B" "595B" "30L" "60B" "427A" "91L" "39B" "52H" "545E" "24B" "104E" "246A" "395A" "265A" "58A" "97C" "365G" "55H" "44C" "223A" "50C" "137E" "93L" "56L" "254D" "97E" "39B" "68C" "437G" "32L" "99B" "32C" "31B" "49A" "57H" "21B" "148A" "195A" "265B" "61B" "424B" "54U" "131R" "71A" "32B" "32B" "507C" "188A" "60T" "58A" "92B" "873B" "35B" "59A" "354A" "454D" "59H" "281C" "53J" "399B" "526F" "195E" "1460B" "40B" "156A" "103H" "56C" "367B" "84H" "53H" "121B" "857D" "156A" "28B" "11U" "123B" "44Y" "70A" "101H" "357B" "107B" "190B" "32L" "113C" "16F" "279A" "418A" "121G" "131E" "48H" "190E" "28A" "140A" "166A" "200A" "250A" "65B" "941A" "645D" "214A" "25H" "16A" "31H" "364A" "28L" "372N" "28C" "122A" "31D" "190A" "1602A" "126B" "214B" "9D" "54A" "181A" "1641B" "1552D" "228A" "28L" "89B" "93L" "616A" "36A" "31H" "58A" "57E" "32F" "204L" "145A" "58H" "28B" "26A" "31D" "45C" "188A" "89A" "3A" "40A" "30E" "369A" "57H" "56H" "339A" "386A" "270A" "350A" "40A" "28B")

for i in {0..200}
do
    srun /PATH_TO_ROSETTA/source/bin/rosetta_scripts.default.linuxiccrelease -parser:protocol recovery.xml -ignore_unrecognized_res -out:file:score_only recover_ser.sc -s ${pdb_id[$i]}.pdb -parser:script_vars c1=${chains1[$i]} c2=${chains2[$i]} r=${mut_res[$i]} -out:no_nstruct_label -mute core.scoring.sc.ShapeIdentityCalculator -in:file:native ${pdb_id[$i]}.pdb -mute all
done
    
