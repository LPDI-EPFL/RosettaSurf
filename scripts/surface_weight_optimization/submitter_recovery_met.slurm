#!/bin/bash
#SBATCH --nodes 1
#SBATCH --ntasks-per-node 1
#SBATCH --cpus-per-task 1
#SBATCH --mem 8192
#SBATCH --time 48:00:00
#SBATCH --partition serial
#SBATCH --output=./met.%A_%a.out
#SBATCH --error=./met.%A_%a.err

pdb_id=("4LU5_IM_A" "2OOR_AB_C" "3D1M_A_D" "2PKG_A_C" "5GZO_HL_A" "5LI1_A_B" "2VE7_A_C" "1EZU_C_AB" "2MTA_HL_A" "5KAQ_FG_C" "4MSM_A_B" "3HCU_A_B" "2VAY_A_B" "4C4P_A_B" "3TAC_A_B" "2VE7_A_C" "3TNF_A_B" "3IDC_A_B" "1F51_AB_E" "5CJO_HL_A" "2ARP_A_F" "4YL8_A_B" "4RWT_A_D" "5SZJ_A_B" "4G01_A_B" "2PKG_A_C" "1PPE_E_I" "2L0T_A_B" "4RDQ_GF_E" "2QXV_A_B" "4RWT_A_D" "4U32_X_A" "1XD3_A_B" "2C1M_A_B" "2WO3_A_B" "1AK4_A_D" "1IQD_AB_C" "4A49_A_B" "5JZE_B_A" "3TZ1_A_B" "3ZWL_B_E" "3K9M_A_C" "2Y8S_A_B" "3KR3_HL_D" "3V4Y_A_B" "3NCB_A_B" "4ZII_A_C" "4YDJ_HL_G" "2GAF_D_A" "2OOR_AB_C" "4YVQ_A_C" "3W8I_A_B" "5EP6_A_B" "2YGG_A_B" "5J8H_A_B" "2WWX_A_B" "5B77_A_B" "1VRK_A_B" "5CTR_A_C" "5XXY_HL_A" "3RPG_B_C" "1CZ8_YX_V" "5FR2_A_B" "3ZO0_A_B" "2BE6_A_D" "2VAY_A_B" "2WEL_A_D" "4ZRJ_A_B" "5J7C_A_C" "2LKM_A_B" "4ZSO_BA_E" "3MA9_HL_A" "4CMH_BC_A" "5D7L_A_B" "1T5Z_A_B" "3LVK_AC_B" "4H03_A_B" "2EFD_A_B" "5AGX_A_D" "2WEL_A_D" "5J28_A_C" "3ZWZ_A_B" "1R8S_A_E" "1OGY_A_B" "4DX8_A_J" "1BJ1_HL_VW" "3JZA_A_B" "2MV7_A_B" "4G6J_HL_A" "1G9M_HL_G" "3DVU_A_C" "1HCF_AB_X" "1WPX_A_B" "3F7P_A_C" "4EHQ_A_G" "2MLZ_B_A" "3BX7_A_C" "3WO3_A_B" "1J7D_A_B" "3EHU_A_C" "1YCS_A_B" "3R9A_AC_B" "2BE6_A_D" "2AJF_A_E" "5TIH_HL_A" "3OKY_A_B" "3ZNZ_A_B" "5D1K_A_B" "4YOC_A_C" "4HJ0_PQ_A" "2XHE_A_B" "1PKQ_GF_J" "1GPW_A_B" "4JEU_A_B" "1RKE_A_B" "2JEL_HL_P" "4M1L_A_B" "5IUS_A_C" "2JGZ_A_B" "2LVO_A_C" "2P8Q_A_B" "3RDZ_A_C" "1J7V_L_R" "4HF5_HL_A" "3TZ1_A_B" "3QBV_A_B" "4YH7_A_B" "3DOE_A_B" "1UAD_A_C" "3CX7_A_B" "5JKE_A_B" "3GI9_HL_C" "2C1M_A_B" "3HI6_XY_B" "2O3B_A_B" "4LZX_A_B" "2M0J_A_B" "1AVA_A_C" "2FDB_M_P" "5T5F_HL_A" "4LZX_A_B" "2LFW_A_B" "2ES4_A_D" "4XOI_A_B" "4OYD_A_B" "1WRD_A_B" "5EP6_A_B" "4DBG_A_B" "5ABV_A_B" "4UEM_A_B" "4XVP_A_D" "4YH7_A_B" "1VYT_A_E" "1XJ7_A_B" "4RS1_B_A" "4UEM_A_B" "3BX1_A_C" "5JLV_A_C" "3VV2_A_B" "2C1M_A_B" "2F9Z_A_C" "4MP0_A_B" "3IFQ_A_C" "1CBW_ABC_D" "2NY1_DC_A" "2WG4_A_B" "2LUH_A_B" "2LQC_A_B" "2LFW_A_B" "3JZA_A_B" "4LZX_A_B" "2V8S_E_V" "2OZ4_HL_A" "3CQC_A_B" "5HPK_A_B" "5BN5_A_B" "2WFX_A_B" "1FC2_C_D" "4KSD_A_B" "3MJH_A_B" "5IJ9_A_B" "1SHZ_A_C" "3OUX_A_B" "2WWX_A_B" "5H35_FG_E" "1F34_A_B" "3DVU_A_C" "1IQD_AB_C" "3WRX_A_C" "1EER_A_BC" "2J8X_A_B" "5J4A_A_B" "2Z0E_A_B" "1ACB_E_I" "4LYL_A_B" "3H8K_A_B" "1Y3D_E_I" "4PZ6_A_Q" "1TO1_E_I" "5B76_A_B")
chains1=("A" "C" "D" "A" "A" "A" "C" "A,B" "A" "F,G" "A" "B" "A" "B" "B" "A" "B" "B" "A,B" "A" "A" "A" "D" "A" "B" "C" "I" "B" "G,F" "B" "D" "X" "A" "B" "A" "A" "C" "A" "A" "A" "E" "A" "A" "H,L" "A" "B" "A" "G" "D" "A,B" "A" "B" "A" "B" "A" "B" "A" "A" "A" "A" "B" "V" "B" "A" "A" "A" "D" "A" "C" "B" "E" "H,L" "A" "B" "A" "B" "B" "B" "A" "D" "A" "B" "E" "B" "A" "V,W" "B" "A" "A" "G" "C" "X" "B" "C" "A" "A" "C" "A" "A" "C" "B" "B" "A" "A" "H,L" "B" "B" "B" "C" "A" "B" "G,F" "B" "A" "B" "H,L" "A" "C" "B" "C" "A" "C" "L" "H,L" "B" "B" "A" "A" "A" "A" "B" "C" "B" "B" "B" "B" "A" "A" "M" "A" "A" "B" "D" "B" "B" "A" "B" "A" "A" "A" "A" "B" "A" "A" "A" "B" "C" "A" "A" "B" "C" "A" "C" "A,B,C" "A" "B" "B" "A" "A" "B" "B" "E" "A" "B" "B" "A" "B" "D" "A" "A" "B" "A" "B" "B" "E" "B" "C" "C" "C" "B,C" "B" "A" "A" "E" "B" "A" "I" "A" "E" "A")
chains2=("I,M" "A,B" "A" "C" "H,L" "B" "A" "C" "H,L" "C" "B" "A" "B" "A" "A" "C" "A" "A" "E" "H,L" "F" "B" "A" "B" "A" "A" "E" "A" "E" "A" "A" "A" "B" "A" "B" "D" "A,B" "B" "B" "B" "B" "C" "B" "D" "B" "A" "C" "H,L" "A" "C" "C" "A" "B" "A" "B" "A" "B" "B" "C" "H,L" "C" "Y,X" "A" "B" "D" "B" "A" "B" "A" "A" "B,A" "A" "B,C" "A" "B" "A,C" "A" "A" "D" "A" "C" "A" "A" "A" "J" "H,L" "A" "B" "H,L" "H,L" "A" "A,B" "A" "A" "G" "B" "A" "B" "B" "A" "A" "A,C" "D" "E" "A" "A" "A" "A" "A" "P,Q" "A" "J" "A" "B" "A" "P" "B" "A" "A" "A" "B" "A" "R" "A" "A" "A" "B" "B" "C" "B" "A" "H,L" "A" "X,Y" "A" "A" "B" "C" "P" "H,L" "B" "A" "A" "A" "A" "B" "A" "B" "B" "B" "D" "A" "E" "B" "B" "A" "A" "C" "B" "A" "A" "B" "A" "D" "D,C" "A" "A" "B" "B" "A" "A" "V" "H,L" "A" "A" "B" "A" "C" "B" "B" "A" "C" "A" "A" "F,G" "A" "A" "A,B" "A" "A" "A" "B" "B" "I" "A" "B" "E" "Q" "I" "B")
mut_res=("118A" "149C" "919D" "180A" "68A" "341A" "79C" "285B" "71A" "108F" "364A" "64B" "71A" "489B" "987B" "220A" "402B" "264B" "33A" "466A" "89A" "285A" "320D" "1A" "78B" "146C" "8I" "37B" "50G" "41B" "310D" "18X" "213A" "1B" "60A" "61A" "2255C" "374A" "149A" "147A" "689E" "196A" "233A" "57H" "190A" "71B" "99A" "373G" "33D" "164A" "496A" "399B" "219A" "37B" "109A" "444B" "278A" "36A" "500A" "115A" "17B" "81V" "145B" "314A" "51A" "109A" "146D" "179A" "50C" "273B" "203E" "93L" "110A" "0B" "894A" "59B" "283B" "78B" "115A" "125D" "290A" "2042B" "216E" "119B" "141A" "94W" "444B" "515A" "20A" "434G" "109C" "354X" "501B" "1282C" "124A" "428A" "99C" "60A" "41A" "38C" "422B" "613B" "145A" "82A" "98H" "162B" "77B" "222B" "761C" "67A" "10B" "98G" "121B" "47A" "1005B" "96H" "125A" "115C" "287B" "467C" "630A" "69C" "39L" "28H" "157B" "1379B" "271A" "10A" "35A" "257A" "83B" "1C" "24B" "140B" "22B" "408B" "36A" "296A" "175M" "123A" "125A" "48B" "158D" "18B" "53B" "237A" "697B" "66A" "73A" "148A" "153A" "75B" "195A" "894A" "46A" "342B" "35C" "1144A" "247A" "35B" "92C" "290A" "638C" "192C" "434A" "382B" "156B" "76A" "107A" "439B" "418B" "53E" "391A" "934B" "71B" "289A" "379B" "252D" "623A" "88A" "1B" "257A" "21B" "439B" "1E" "73B" "126C" "2199C" "1108C" "150C" "56B" "245A" "75A" "192E" "56B" "42A" "59I" "197A" "222E" "300A")

for i in {0..200}
do
    srun /PATH_TO_ROSETTA/source/bin/rosetta_scripts.default.linuxiccrelease -parser:protocol recovery.xml -ignore_unrecognized_res -out:file:score_only recover_met.sc -s ${pdb_id[$i]}.pdb -parser:script_vars c1=${chains1[$i]} c2=${chains2[$i]} r=${mut_res[$i]} -out:no_nstruct_label -mute core.scoring.sc.ShapeIdentityCalculator -in:file:native ${pdb_id[$i]}.pdb -mute all
done
    
